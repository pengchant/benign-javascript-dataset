!function(t){"use strict";var e,n,i,o=0,r=[],u="data-src",a=[],l=[],c=[],s=!1,f=0,d=4,m="MutationObserver"in t,g=[{eventName:"DOMContentLoaded",listener:A},{eventName:"load",listener:A},{eventName:"scroll",listener:F},{eventName:"resize",listener:F}],v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function h(){n=t.innerHeight||document.documentElement.clientHeight,i=t.innerWidth||document.documentElement.clientWidth}function w(t,e,n,i,o){t&&t.length&&(t.forEach(function(o,r){n&&n(o)||i.push(e.bind(t,o,r))}),E(o,i))}function E(t,e){s||(s=!0,v(function(){!function(t,e){f=0!==e.length?0:f+1;for(;0!==e.length;)e.shift()();s=!1,r.length&&f<d?v(function(){"postMutate"===t?E("mutate",l):E("postMutate",a)}):f=0}(t,e)}))}function b(t){var n=function(t){var i=t.target;i.dispatchEvent(new CustomEvent("lazyload")),i.removeEventListener("load",n,!1),r.splice(r.indexOf(i),1),0===r.length&&(e&&e.disconnect(),g.forEach(function(t){removeEventListener(t.eventName,t.listener,!1)}))};t.addEventListener("load",n,!1)}function p(t){t.length>0&&w(t,function(t){t&&t.target&&t.oldValue&&(b(t.target),t.target.setAttribute("src",t.oldValue))},null,s?a:c,"postMutate")}function A(){w(r,function(t){t.removeAttribute(u)},function(t){return null===t.getAttribute(u)||(e=t.parentElement.getBoundingClientRect(),r=e.top<=n+o&&e.top+e.height>0,a=e.left<=i+o&&e.left+e.width>0,!(r&&a));var e,r,a},l,"mutate")}function F(t){s||("resize"===t.type&&h(),v(A))}function L(t){e||(e=new MutationObserver(p)),function(t){t&&t.length>0&&(t.forEach(function(t){e.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:[u]})}),r=r.concat(t))}(t)}function N(t){if(t){var e=t.querySelectorAll("img["+u+"]");if(e.length)return e=[].slice.call(e),r.length?function(t){var e;t.length&&(e=t.filter(function(t){return-1===r.indexOf(t)}));return e||[]}(e):e}}t.SFE=t.ebayUtils||{},t.SFE.LazyLoading={initialize:function(t){h();var e=N(document);e&&e.length&&(m?(t&&(o=t),L(e),g.forEach(function(t){addEventListener(t.eventName,t.listener,!1)})):p(e.map(function(t){return{target:t,oldValue:t.getAttribute(u)}})))},register:function(t,e){var n=N(e);n&&n.length&&(m?L(n):p(n.map(function(t){return{target:t,oldValue:t.getAttribute(u)}}))),m&&(g.push({eventName:t,listener:A}),addEventListener(t,A,!1))}}}(window);