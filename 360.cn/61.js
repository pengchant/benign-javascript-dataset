(function(){var g=hao360.g,cityCode=hao360.cityCode.get(),blackList=[],weatherAppData=new AppData('api.hao.360.cn',HAO_CONFIG.weather.weather.r),cityCodeAppData=weatherAppData.get('weather')?weatherAppData.get('weather').code:'';if(!cityCode||(cityCode&&cityCodeAppData&&(cityCode!=cityCodeAppData))){weatherAppData.remove('weather');}var weatherData=weatherAppData.get('weather');var inBlackList=function(city){return blackList.join().indexOf(city)>-1};R('weather-inner').render(function(data){var soUrl='http://www.so.com/s?',soParams={ie:'utf-8',q:'天气预报'};var prov=data.area[0][0],city=data.area[1][0],town=data.area[2][0],q;if(prov==town){q=town;}else{q=prov+town;}soParams.q=q+soParams.q;data.link=soUrl+qboot.encodeURIJson(soParams);if(!inBlackList(city)){data.town='<a href="'+data.link+'&src=hao_weather_mob">'+town+'</a>';}else{data.town=town;}g('weather-inner').innerHTML=R.tmpl(g('weather-template').innerHTML,data);},weatherData);})();